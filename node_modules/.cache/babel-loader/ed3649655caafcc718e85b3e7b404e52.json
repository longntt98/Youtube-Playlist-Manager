{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Long Nguyen\\\\Desktop\\\\trainning react\\\\Youtube-Playlist-Manager\\\\src\\\\components\\\\VideoPlayer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { db } from \"../firebase/firebase\";\nimport PlaylistItem from './MyPlaylistItem';\nimport VideoStream from './VideoStream';\nimport Comment from \"./Comment\";\nconst UID = localStorage.getItem(\"UID\");\n\nfunction VideoPlayer(props) {\n  const [dataFromDB, setDataFromDB] = useState([]);\n  const [nextVideo, setNextVideo] = useState(\"\");\n  const [videoID, setVideoID] = useState(\"\");\n  const [videoTitle, setVideoTitle] = useState(\"\");\n  const [playlistTitle, setPlaylistTitle] = useState(\"\");\n  const [commentDetail, setCommentDetail] = useState(\"\");\n  const [comment, setComment] = useState([]);\n  const [quantity, setQuantity] = useState(\"\");\n  useEffect(() => {\n    db.ref(`playlist/public/${props.match.params.playlistID}`).on(\"value\", data => {\n      let accessModifier = \"\";\n\n      if (data.val()) {\n        accessModifier = \"public\";\n      } else accessModifier = \"private\";\n\n      const db1 = db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistVideo`);\n      db1.on(\"value\", data => {\n        let array = [];\n        data.forEach(element => {\n          array.push({\n            videoID: element.key,\n            videoTitle: element.val().videoTitle,\n            videoThumbnail: element.val().videoThumbnail\n          });\n        });\n        setDataFromDB([...array]);\n      });\n      const db2 = db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistVideo/${props.match.params.videoID}`);\n      db2.on(\"value\", data2 => {\n        if (data2.val()) {\n          setVideoID(props.match.params.videoID);\n          setNextVideo(data2.val().nextVideo);\n          setVideoTitle(data2.val().videoTitle);\n        }\n      });\n      const db3 = db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}`);\n      db3.on(\"value\", data => {\n        if (data.val()) {\n          setPlaylistTitle(data.val().playlistTitle);\n          setQuantity(data.val().quantity);\n        }\n      });\n      db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistComment`).on(\"value\", data => {\n        if (data.val()) {\n          let array = [];\n          data.forEach(element => {\n            db.ref(`users/${element.val().UID}`).on(\"value\", data1 => {\n              if (data1.val()) {\n                array.push({\n                  username: data1.val().username,\n                  photoURL: data1.val().photoURL,\n                  commentDetail: element.val().commentDetail\n                });\n                setComment([...array]);\n              }\n            });\n          });\n        }\n      });\n    });\n  }, [props.match.params.videoID, props.match.params.playlistID]);\n\n  const getVideo = () => {\n    if (dataFromDB) {\n      return dataFromDB.map((value, key) => {\n        return /*#__PURE__*/React.createElement(PlaylistItem, {\n          key: key,\n          videoID: value.videoID,\n          videoThumbnail: value.videoThumbnail,\n          videoTitle: value.videoTitle,\n          playlistID: props.match.params.playlistID,\n          videoID2: (videoID, videoTitle) => getVideoID(videoID, videoTitle),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 24\n          }\n        });\n      });\n    }\n  };\n\n  const getComment = () => {\n    if (comment) {\n      return comment.map((value, key) => {\n        return /*#__PURE__*/React.createElement(Comment, {\n          key: key,\n          username: value.username,\n          photoURL: value.photoURL,\n          commentDetail: value.commentDetail,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 24\n          }\n        });\n      });\n    }\n  };\n\n  const getVideoID = (videoID, videoTitle) => {\n    setVideoID(videoID);\n    setVideoTitle(videoTitle);\n  };\n\n  const func = params => {\n    setVideoID(params);\n  };\n\n  const isChange = event => {\n    setCommentDetail(event.target.value);\n  };\n\n  const pushComment = () => {\n    console.log(123);\n\n    if (UID) {\n      if (commentDetail) {\n        db.ref(`playlist/public/${props.match.params.playlistID}`).once(\"value\", data => {\n          console.log(\"abc\");\n          let accessModifier = \"\";\n\n          if (data.val()) {\n            accessModifier = \"public\";\n          } else accessModifier = \"private\";\n\n          db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistComment`).push({\n            UID: UID,\n            commentDetail: commentDetail\n          });\n        });\n      } else alert(\"Vui lòng nhập nội dung bình luận\");\n    } else alert(\"Vui lòng đăng nhập để bình luận\");\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container-fluid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(VideoStream, {\n    videoID: props.match.params.videoID,\n    nextVideo: nextVideo,\n    func: params => func(params),\n    playlistID: props.match.params.playlistID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"videoplayer-video-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, videoTitle), /*#__PURE__*/React.createElement(\"hr\", {\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, \"B\\xECnh lu\\u1EADn:\"), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flexWrap: \"wrap\",\n      display: \"flex\",\n      height: \"45px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: event => isChange(event),\n    className: \"form-control col\",\n    placeholder: \"B\\xECnh lu\\u1EADn c\\xF4ng khai ....\",\n    \"aria-describedby\": \"helpId\",\n    style: {\n      height: \"auto\",\n      fontSize: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => pushComment(),\n    className: \"col-2\",\n    className: \"btn btn-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"B\\xECnh lu\\u1EADn:\")), /*#__PURE__*/React.createElement(\"hr\", {\n    style: {\n      backgroundColor: \"white\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }), getComment()), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"list-group\",\n    style: {\n      height: \"430px\",\n      overflowY: \"auto\",\n      overflowX: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"videoplayer-video-title text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 25\n    }\n  }, playlistTitle, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 91\n    }\n  }), quantity, \" video\"), getVideo()))));\n}\n\nexport default VideoPlayer;","map":{"version":3,"sources":["C:/Users/Long Nguyen/Desktop/trainning react/Youtube-Playlist-Manager/src/components/VideoPlayer.js"],"names":["React","useState","useEffect","db","PlaylistItem","VideoStream","Comment","UID","localStorage","getItem","VideoPlayer","props","dataFromDB","setDataFromDB","nextVideo","setNextVideo","videoID","setVideoID","videoTitle","setVideoTitle","playlistTitle","setPlaylistTitle","commentDetail","setCommentDetail","comment","setComment","quantity","setQuantity","ref","match","params","playlistID","on","data","accessModifier","val","db1","array","forEach","element","push","key","videoThumbnail","db2","data2","db3","data1","username","photoURL","getVideo","map","value","getVideoID","getComment","func","isChange","event","target","pushComment","console","log","once","alert","backgroundColor","flexWrap","display","height","fontSize","overflowY","overflowX"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db } from \"../firebase/firebase\"\r\nimport PlaylistItem from './MyPlaylistItem';\r\nimport VideoStream from './VideoStream';\r\nimport Comment from \"./Comment\"\r\nconst UID = localStorage.getItem(\"UID\");\r\nfunction VideoPlayer(props) {\r\n    const [dataFromDB, setDataFromDB] = useState([]);\r\n    const [nextVideo, setNextVideo] = useState(\"\");\r\n    const [videoID, setVideoID] = useState(\"\");\r\n    const [videoTitle, setVideoTitle] = useState(\"\");\r\n    const [playlistTitle, setPlaylistTitle] = useState(\"\");\r\n    const [commentDetail, setCommentDetail] = useState(\"\");\r\n    const [comment, setComment] = useState([])\r\n    const [quantity, setQuantity] = useState(\"\")\r\n\r\n\r\n    useEffect(() => {\r\n        db.ref(`playlist/public/${props.match.params.playlistID}`).on(\"value\", data => {\r\n            let accessModifier = \"\";\r\n            if (data.val()) {\r\n                accessModifier = \"public\";\r\n            } else accessModifier = \"private\";\r\n            const db1 = db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistVideo`)\r\n            db1.on(\"value\", data => {\r\n                let array = [];\r\n                data.forEach(element => {\r\n                    array.push({\r\n                        videoID: element.key,\r\n                        videoTitle: element.val().videoTitle,\r\n                        videoThumbnail: element.val().videoThumbnail,\r\n                    })\r\n                })\r\n                setDataFromDB([...array])\r\n            })\r\n            const db2 = db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistVideo/${props.match.params.videoID}`)\r\n            db2.on(\"value\", data2 => {\r\n                if (data2.val()) {\r\n                    setVideoID(props.match.params.videoID);\r\n                    setNextVideo(data2.val().nextVideo);\r\n                    setVideoTitle(data2.val().videoTitle);\r\n\r\n                }\r\n            })\r\n\r\n            const db3 = db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}`);\r\n            db3.on(\"value\", data => { if (data.val()){\r\n                setPlaylistTitle(data.val().playlistTitle);\r\n                setQuantity(data.val().quantity)\r\n            }  });\r\n\r\n            db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistComment`).on(\"value\", data => {\r\n                if (data.val()) {\r\n                    let array = [];\r\n                    data.forEach(element => {\r\n                        db.ref(`users/${element.val().UID}`).on(\"value\", data1 => {\r\n                            if (data1.val()) {\r\n                                array.push({\r\n                                    username: data1.val().username,\r\n                                    photoURL: data1.val().photoURL,\r\n                                    commentDetail: element.val().commentDetail,\r\n                                })\r\n                                setComment([...array]);\r\n                            }\r\n                        })\r\n                    })\r\n\r\n                }\r\n\r\n            })\r\n        })\r\n\r\n    }, [props.match.params.videoID, props.match.params.playlistID]);\r\n\r\n    const getVideo = () => {\r\n        if (dataFromDB) {\r\n            return dataFromDB.map((value, key) => {\r\n                return <PlaylistItem\r\n\r\n                    key={key}\r\n                    videoID={value.videoID}\r\n                    videoThumbnail={value.videoThumbnail}\r\n                    videoTitle={value.videoTitle}\r\n                    playlistID={props.match.params.playlistID}\r\n                    videoID2={(videoID, videoTitle) => getVideoID(videoID, videoTitle)}\r\n                />\r\n            })\r\n        }\r\n    }\r\n\r\n    const getComment = () => {\r\n        if (comment) {\r\n            return comment.map((value, key) => {\r\n                return <Comment\r\n                    key={key}\r\n                    username={value.username}\r\n                    photoURL={value.photoURL}\r\n                    commentDetail={value.commentDetail}\r\n                />\r\n            })\r\n        }\r\n    }\r\n\r\n    const getVideoID = (videoID, videoTitle) => {\r\n        setVideoID(videoID);\r\n        setVideoTitle(videoTitle);\r\n    }\r\n\r\n    const func = (params) => {\r\n        setVideoID(params)\r\n    }\r\n\r\n    const isChange = (event) => {\r\n        setCommentDetail(event.target.value);\r\n    }\r\n\r\n    const pushComment = () => {\r\n        console.log(123)\r\n        if (UID) {\r\n            if (commentDetail) {\r\n                db.ref(`playlist/public/${props.match.params.playlistID}`).once(\"value\", data => {\r\n                    console.log(\"abc\");\r\n                    let accessModifier = \"\";\r\n                    if (data.val()) {\r\n                        accessModifier = \"public\";\r\n                    } else accessModifier = \"private\";\r\n                    db.ref(`playlist/${accessModifier}/${props.match.params.playlistID}/playlistComment`).push({\r\n                        UID: UID,\r\n                        commentDetail: commentDetail,\r\n                    })\r\n                })\r\n            } else alert(\"Vui lòng nhập nội dung bình luận\")\r\n\r\n        } else alert(\"Vui lòng đăng nhập để bình luận\")\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                <div className=\"col-8\">\r\n                    <VideoStream videoID={props.match.params.videoID} nextVideo={nextVideo} func={(params) => func(params)} playlistID={props.match.params.playlistID} ></VideoStream>\r\n                    <p className=\"videoplayer-video-title\">{videoTitle}</p>\r\n                    <hr style={{ backgroundColor: \"white\" }} />\r\n                    <h2>Bình luận:</h2>\r\n                    <div style={{ flexWrap: \"wrap\", display: \"flex\", height: \"45px\" }}>\r\n                        <input type=\"text\" onChange={(event) => isChange(event)} className=\"form-control col\" placeholder=\"Bình luận công khai ....\" aria-describedby=\"helpId\" style={{ height: \"auto\", fontSize: \"20px\" }} />\r\n                        <button onClick={() => pushComment()} className=\"col-2\" className=\"btn btn-info\">Bình luận:</button>\r\n                    </div>\r\n                    <hr style={{ backgroundColor: \"white\" }} />\r\n                    {getComment()}\r\n                </div>\r\n                <div className=\"col-4\">\r\n                    <ul className=\"list-group\" style={{ height: \"430px\", overflowY: \"auto\", overflowX: \"hidden\" }}>\r\n                        <p className=\"videoplayer-video-title text-center\">{playlistTitle}<br />{quantity} video</p>\r\n                        {getVideo()}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default VideoPlayer;"]},"metadata":{},"sourceType":"module"}